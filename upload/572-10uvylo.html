<h1>3.8.0 / 2013-10-31</h1>

<ul>
<li>updated; warn when using an unstable version</li>
<li>updated; error message returned in doc.save() #1595</li>
<li>updated; mongodb driver to 1.3.19 (fix error swallowing behavior)</li>
<li>updated; mquery to 0.3.2</li>
<li>updated; mocha to 1.12.0</li>
<li>updated; mpromise 0.3.0</li>
<li>updated; sliced 0.0.5</li>
<li>removed; mongoose.Error.DocumentError (never used)</li>
<li>removed; namedscope (undocumented and broken) #679 #642 #455 #379</li>
<li>changed; no longer offically supporting node 0.6.x</li>
<li>changed; query.within getter is now a method -&gt; query.within()</li>
<li>changed; query.intersects getter is now a method -&gt; query.intersects()</li>
<li>added; custom error msgs for built-in validators #747</li>
<li>added; discriminator support #1647 #1003 <a href="https://github.com/j">j</a></li>
<li>added; support disabled collection name pluralization #1350 #1707 <a href="https://github.com/refack">refack</a></li>
<li>added; support for GeoJSON to Query#near <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; stand-alone base query support - query.toConstructor() <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to geoSearch #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support for geoNear #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; connection.useDb() #1124 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to model.mapReduce()</li>
<li>added; promise support to model.ensureIndexes()</li>
<li>added; promise support to model.populate()</li>
<li>added; benchmarks <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; publicly exposed connection states #1585</li>
<li>added; $geoWithin support #1529 $1455 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; query method chain validation</li>
<li>added; model.update <code>overwrite</code> option</li>
<li>added; model.geoNear() support #1563 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; model.geoSearch() support #1560 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; MongooseBuffer#subtype()</li>
<li>added; model.create() now returns a promise #1340</li>
<li>added; support for <code>awaitdata</code> query option</li>
<li>added; pass the doc to doc.remove() callback #1419 <a href="https://github.com/JoeWagner">JoeWagner</a></li>
<li>added; aggregation query builder #1404 <a href="https://github.com/njoyard">njoyard</a></li>
<li>fixed; document.toObject when using <code>minimize</code> and <code>getters</code> options #1607 <a href="https://github.com/JedWatson">JedWatson</a></li>
<li>fixed; Mixed types can now be required #1722 <a href="https://github.com/Reggino">Reggino</a></li>
<li>fixed; do not pluralize model names not ending with letters #1703 <a href="https://github.com/refack">refack</a></li>
<li>fixed; repopulating modified populated paths #1697</li>
<li>fixed; doc.equals() when _id option is set to false #1687</li>
<li>fixed; strict mode warnings #1686</li>
<li>fixed; $near GeoJSON casting #1683</li>
<li>fixed; nearSphere GeoJSON query builder</li>
<li>fixed; population field selection w/ strings #1669</li>
<li>fixed; setters not firing on null values #1445 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; handle another versioning edge case #1520</li>
<li>fixed; excluding subdocument fields #1280 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; allow array properties to be set to null with findOneAndUpdate <a href="https://github.com/aheuermann">aheuermann</a></li>
<li>fixed; subdocuments now use own toJSON opts #1376 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model#geoNear fulfills promise when results empty #1658 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; utils.merge no longer overrides props and methods #1655 <a href="https://github.com/j">j</a></li>
<li>fixed; subdocuments now use their own transform #1412 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model.remove() removes only what is necessary #1649</li>
<li>fixed; update() now only runs with cb or explicit true #1644</li>
<li>fixed; casting ref docs on creation #1606 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model.update &ldquo;overwrite&rdquo; option works as documented</li>
<li>fixed; query#remove() works as documented</li>
<li>fixed; &ldquo;limit&rdquo; correctly applies to individual items on population #1490 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; issue with positional operator on ref docs #1572 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; benchmarks to actually output valid json</li>
<li>deprecated; promise#addBack (use promise#onResolve)</li>
<li>deprecated; promise#complete (use promise#fulfill)</li>
<li>deprecated; promise#addCallback (use promise#onFulFill)</li>
<li>deprecated; promise#addErrback (use promise#onReject)</li>
<li>deprecated; query.nearSphere() (use query.near)</li>
<li>deprecated; query.center() (use query.circle)</li>
<li>deprecated; query.centerSphere() (use query.circle)</li>
<li>deprecated; query#slaveOk (use query#read)</li>
<li>docs; custom validator messages</li>
<li>docs; 10gen -&gt; MongoDB</li>
<li>docs; add Date method caveats #1598</li>
<li>docs; more validation details</li>
<li>docs; state which branch is stable/unstable</li>
<li>docs; mention that middleware does not run on Models</li>
<li>docs; promise.fulfill()</li>
<li>docs; fix readme spelling #1483 <a href="https://github.com/yorchopolis">yorchopolis</a></li>
<li>docs; fixed up the README and examples <a href="https://github.com/ebensing">ebensing</a></li>
<li>website; add &ldquo;show code&rdquo; for properties</li>
<li>website; move &ldquo;show code&rdquo; links down</li>
<li>website; update guide</li>
<li>website; add unstable docs</li>
<li>website; many improvements</li>
<li>website; fix copyright #1439</li>
<li>website; server.js -&gt; static.js #1546 <a href="https://github.com/nikmartin">nikmartin</a></li>
<li>tests; refactor 1703</li>
<li>tests; add test generator</li>
<li>tests; validate formatMessage() throws</li>
<li>tests; add script for continuously running tests</li>
<li>tests; fixed versioning tests</li>
<li>tests; race conditions in tests</li>
<li>tests; added for nested and/or queries</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; replace deprecated method names</li>
<li>tests; convert id to string</li>
<li>tests; fix sharding tests for MongoDB 2.4.5</li>
<li>tests; now 4-5 seconds faster</li>
<li>tests; fix race condition</li>
<li>make; suppress warning msg in test</li>
<li>benchmarks; updated for pull requests</li>
<li>examples; improved and expanded <a href="https://github.com/ebensing">ebensing</a></li>
</ul>

<h1>3.7.4 (unstable) / 2013-10-01</h1>

<ul>
<li>updated; mquery to 0.3.2</li>
<li>removed; mongoose.Error.DocumentError (never used)</li>
<li>added; custom error msgs for built-in validators #747</li>
<li>added; discriminator support #1647 #1003 <a href="https://github.com/j">j</a></li>
<li>added; support disabled collection name pluralization #1350 #1707 <a href="https://github.com/refack">refack</a></li>
<li>fixed; do not pluralize model names not ending with letters #1703 <a href="https://github.com/refack">refack</a></li>
<li>fixed; repopulating modified populated paths #1697</li>
<li>fixed; doc.equals() when _id option is set to false #1687</li>
<li>fixed; strict mode warnings #1686</li>
<li>fixed; $near GeoJSON casting #1683</li>
<li>fixed; nearSphere GeoJSON query builder</li>
<li>fixed; population field selection w/ strings #1669</li>
<li>docs; custom validator messages</li>
<li>docs; 10gen -&gt; MongoDB</li>
<li>docs; add Date method caveats #1598</li>
<li>docs; more validation details</li>
<li>website; add &ldquo;show code&rdquo; for properties</li>
<li>website; move &ldquo;show code&rdquo; links down</li>
<li>tests; refactor 1703</li>
<li>tests; add test generator</li>
<li>tests; validate formatMessage() throws</li>
</ul>

<h1>3.7.3 (unstable) / 2013-08-22</h1>

<ul>
<li>updated; warn when using an unstable version</li>
<li>updated; mquery to 0.3.1</li>
<li>updated; mocha to 1.12.0</li>
<li>updated; mongodb driver to 1.3.19 (fix error swallowing behavior)</li>
<li>changed; no longer offically supporting node 0.6.x</li>
<li>added; support for GeoJSON to Query#near <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; stand-alone base query support - query.toConstructor() <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to geoSearch #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support for geoNear #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; setters not firing on null values #1445 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; handle another versioning edge case #1520</li>
<li>fixed; excluding subdocument fields #1280 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; allow array properties to be set to null with findOneAndUpdate <a href="https://github.com/aheuermann">aheuermann</a></li>
<li>fixed; subdocuments now use own toJSON opts #1376 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model#geoNear fulfills promise when results empty #1658 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; utils.merge no longer overrides props and methods #1655 <a href="https://github.com/j">j</a></li>
<li>fixed; subdocuments now use their own transform #1412 <a href="https://github.com/ebensing">ebensing</a></li>
<li>make; suppress warning msg in test</li>
<li>docs; state which branch is stable/unstable</li>
<li>docs; mention that middleware does not run on Models</li>
<li>tests; add script for continuously running tests</li>
<li>tests; fixed versioning tests</li>
<li>benchmarks; updated for pull requests</li>
</ul>

<h1>3.7.2 (unstable) / 2013-08-15</h1>

<ul>
<li>fixed; model.remove() removes only what is necessary #1649</li>
<li>fixed; update() now only runs with cb or explicit true #1644</li>
<li>tests; race conditions in tests</li>
<li>website; update guide</li>
</ul>

<h1>3.7.1 (unstable) / 2013-08-13</h1>

<ul>
<li>updated; driver to 1.3.18 (fixes memory leak)</li>
<li>added; connection.useDb() #1124 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to model.mapReduce()</li>
<li>added; promise support to model.ensureIndexes()</li>
<li>added; promise support to model.populate()</li>
<li>fixed; casting ref docs on creation #1606 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model.update &ldquo;overwrite&rdquo; option works as documented</li>
<li>fixed; query#remove() works as documented</li>
<li>fixed; &ldquo;limit&rdquo; correctly applies to individual items on population #1490 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; issue with positional operator on ref docs #1572 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; benchmarks to actually output valid json</li>
<li>tests; added for nested and/or queries</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; replace deprecated method names</li>
<li>tests; convert id to string</li>
<li>docs; promise.fulfill()</li>
</ul>

<h1>3.7.0 (unstable) / 2013-08-05</h1>

<ul>
<li>changed; query.within getter is now a method -&gt; query.within()</li>
<li>changed; query.intersects getter is now a method -&gt; query.intersects()</li>
<li>deprecated; promise#addBack (use promise#onResolve)</li>
<li>deprecated; promise#complete (use promise#fulfill)</li>
<li>deprecated; promise#addCallback (use promise#onFulFill)</li>
<li>deprecated; promise#addErrback (use promise#onReject)</li>
<li>deprecated; query.nearSphere() (use query.near)</li>
<li>deprecated; query.center() (use query.circle)</li>
<li>deprecated; query.centerSphere() (use query.circle)</li>
<li>deprecated; query#slaveOk (use query#read)</li>
<li>removed; namedscope (undocumented and broken) #679 #642 #455 #379</li>
<li>added; benchmarks <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; publicly exposed connection states #1585</li>
<li>added; $geoWithin support #1529 $1455 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; query method chain validation</li>
<li>added; model.update <code>overwrite</code> option</li>
<li>added; model.geoNear() support #1563 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; model.geoSearch() support #1560 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; MongooseBuffer#subtype()</li>
<li>added; model.create() now returns a promise #1340</li>
<li>added; support for <code>awaitdata</code> query option</li>
<li>added; pass the doc to doc.remove() callback #1419 <a href="https://github.com/JoeWagner">JoeWagner</a></li>
<li>added; aggregation query builder #1404 <a href="https://github.com/njoyard">njoyard</a></li>
<li>updated; integrate mquery #1562 <a href="https://github.com/ebensing">ebensing</a></li>
<li>updated; error msg in doc.save() #1595</li>
<li>updated; bump driver to 1.3.15</li>
<li>updated; mpromise 0.3.0</li>
<li>updated; sliced 0.0.5</li>
<li>tests; fix sharding tests for MongoDB 2.4.5</li>
<li>tests; now 4-5 seconds faster</li>
<li>tests; fix race condition</li>
<li>docs; fix readme spelling #1483 <a href="https://github.com/yorchopolis">yorchopolis</a></li>
<li>docs; fixed up the README and examples <a href="https://github.com/ebensing">ebensing</a></li>
<li>website; add unstable docs</li>
<li>website; many improvements</li>
<li>website; fix copyright #1439</li>
<li>website; server.js -&gt; static.js #1546 <a href="https://github.com/nikmartin">nikmartin</a></li>
<li>examples; improved and expanded <a href="https://github.com/ebensing">ebensing</a></li>
</ul>

<h1>3.6.20 (stable) / 2013-09-23</h1>

<ul>
<li>fixed; repopulating modified populated paths #1697</li>
<li>fixed; doc.equals w/ _id false #1687</li>
<li>fixed; strict mode warning #1686</li>
<li>docs; near/nearSphere</li>
</ul>

<h1>3.6.19 (stable) / 2013-09-04</h1>

<ul>
<li>fixed; population field selection w/ strings #1669</li>
<li>docs; Date method caveats #1598</li>
</ul>

<h1>3.6.18 (stable) / 2013-08-22</h1>

<ul>
<li>updated; warn when using an unstable version of mongoose</li>
<li>updated; mocha to 1.12.0</li>
<li>updated; mongodb driver to 1.3.19 (fix error swallowing behavior)</li>
<li>fixed; setters not firing on null values #1445 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; properly exclude subdocument fields #1280 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; cast error in findAndModify #1643 <a href="https://github.com/aheuermann">aheuermann</a></li>
<li>website; update guide</li>
<li>website; added documentation for safe:false and versioning interaction</li>
<li>docs; mention that middleware dont run on Models</li>
<li>docs; fix indexes link</li>
<li>make; suppress warning msg in test</li>
<li>tests; moar</li>
</ul>

<h1>3.6.17 / 2013-08-13</h1>

<ul>
<li>updated; driver to 1.3.18 (fixes memory leak)</li>
<li>fixed; casting ref docs on creation #1606</li>
<li>docs; query options</li>
</ul>

<h1>3.6.16 / 2013-08-08</h1>

<ul>
<li>added; publicly expose connection states #1585</li>
<li>fixed; limit applies to individual items on population #1490 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; positional operator casting in updates #1572 <a href="https://github.com/ebensing">ebensing</a></li>
<li>updated; MongoDB driver to 1.3.17</li>
<li>updated; sliced to 0.0.5</li>
<li>website; tweak homepage</li>
<li>tests; fixed + added</li>
<li>docs; fix some examples</li>
<li>docs; multi-mongos support details</li>
<li>docs; auto open browser after starting static server</li>
</ul>

<h1>3.6.15 / 2013-07-16</h1>

<ul>
<li>added; mongos failover support #1037</li>
<li>updated; make schematype return vals return self #1580</li>
<li>docs; add note to model.update #571</li>
<li>docs; document third param to document.save callback #1536</li>
<li>tests; tweek mongos test timeout</li>
</ul>

<h1>3.6.14 / 2013-07-05</h1>

<ul>
<li>updated; driver to 1.3.11</li>
<li>fixed; issue with findOneAndUpdate not returning null on upserts #1533 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; missing return statement in SchemaArray#$geoIntersects() #1498 <a href="https://github.com/bsrykt">bsrykt</a></li>
<li>fixed; wrong isSelected() behavior #1521 <a href="https://github.com/kyano">kyano</a></li>
<li>docs; note about toObject behavior during save()</li>
<li>docs; add callbacks details #1547 <a href="https://github.com/nikmartin">nikmartin</a></li>
</ul>

<h1>3.6.13 / 2013-06-27</h1>

<ul>
<li>fixed; calling model.distinct without conditions #1541</li>
<li>fixed; regression in Query#count() #1542</li>
<li>now working on 3.6.13</li>
</ul>

<h1>3.6.12 / 2013-06-25</h1>

<ul>
<li>updated; driver to 1.3.10</li>
<li>updated; clearer capped collection error message #1509 <a href="https://github.com/bitmage">bitmage</a></li>
<li>fixed; MongooseBuffer subtype loss during casting #1517 <a href="https://github.com/zedgu">zedgu</a></li>
<li>fixed; docArray#id when doc.id is disabled #1492</li>
<li>fixed; docArray#id now supports matches on populated arrays #1492 <a href="https://github.com/pgherveou">pgherveou</a></li>
<li>website; fix example</li>
<li>website; improve _id disabling example</li>
<li>website; fix typo #1494 <a href="https://github.com/dejj">dejj</a></li>
<li>docs; added a &#39;Requesting new features&#39; section #1504 <a href="https://github.com/shovon">shovon</a></li>
<li>docs; improve subtypes description</li>
<li>docs; clarify _id disabling</li>
<li>docs: display by alphabetical order the methods list #1508 <a href="https://github.com/nicolasleger">nicolasleger</a></li>
<li>tests; refactor isSelected checks</li>
<li>tests; remove pointless test</li>
<li>tests; fixed timeouts</li>
</ul>

<h1>3.6.11 / 2013-05-15</h1>

<ul>
<li>updated; driver to 1.3.5</li>
<li>fixed; compat w/ Object.create(null) #1484 #1485</li>
<li>fixed; cloning objects w/ missing constructors</li>
<li>fixed; prevent multiple min number validators #1481 <a href="https://github.com/nrako">nrako</a></li>
<li>docs; add doc.increment() example</li>
<li>docs; add $size example</li>
<li>docs; add &ldquo;distinct&rdquo; example</li>
</ul>

<h1>3.6.10 / 2013-05-09</h1>

<ul>
<li>update driver to 1.3.3</li>
<li>fixed; increment() works without other changes #1475</li>
<li>website; fix links to posterous</li>
<li>docs; fix link #1472</li>
</ul>

<h1>3.6.9 / 2013-05-02</h1>

<ul>
<li>fixed; depopulation of mixed documents #1471</li>
<li>fixed; use of $options in array #1462</li>
<li>tests; fix race condition</li>
<li>docs; fix default example</li>
</ul>

<h1>3.6.8 / 2013-04-25</h1>

<ul>
<li>updated; driver to 1.3.0</li>
<li>fixed; connection.model should retain options #1458 <a href="https://github.com/vedmalex">vedmalex</a></li>
<li>tests; 4-5 seconds faster</li>
</ul>

<h1>3.6.7 / 2013-04-19</h1>

<ul>
<li>fixed; population regression in 3.6.6 #1444</li>
</ul>

<h1>3.6.6 / 2013-04-18</h1>

<ul>
<li>fixed; saving populated new documents #1442</li>
<li>fixed; population regession in 3.6.5 #1441</li>
<li>website; fix copyright #1439</li>
</ul>

<h1>3.6.5 / 2013-04-15</h1>

<ul>
<li>fixed; strict:throw edge case using .set(path, val)</li>
<li>fixed; schema.pathType() on some numbericAlpha paths</li>
<li>fixed; numbericAlpha path versioning</li>
<li>fixed; setting nested mixed paths #1418</li>
<li>fixed; setting nested objects with null prop #1326</li>
<li>fixed; regression in v3.6 population performance #1426 <a href="https://github.com/vedmalex">vedmalex</a></li>
<li>fixed; read pref typos #1422 <a href="https://github.com/kyano">kyano</a></li>
<li>docs; fix method example</li>
<li>website; update faq</li>
<li>website; add more deep links</li>
<li>website; update poolSize docs</li>
<li>website; add 3.6 release notes</li>
<li>website; note about keepAlive</li>
</ul>

<h1>3.6.4 / 2013-04-03</h1>

<ul>
<li>fixed; +field conflict with $slice #1370</li>
<li>fixed; nested deselection conflict #1333</li>
<li>fixed; RangeError in ValidationError.toString() #1296</li>
<li>fixed; do not save user defined transforms #1415</li>
<li>tests; fix race condition</li>
</ul>

<h1>3.6.3 / 2013-04-02</h1>

<ul>
<li>fixed; setting subdocuments deeply nested fields #1394</li>
<li>fixed; regression: populated streams #1411</li>
<li>docs; mention hooks/validation with findAndModify</li>
<li>docs; mention auth</li>
<li>docs; add more links</li>
<li>examples; add document methods example</li>
<li>website; display &ldquo;see&rdquo; links for properties</li>
<li>website; clean up homepage</li>
</ul>

<h1>3.6.2 / 2013-03-29</h1>

<ul>
<li>fixed; corrupted sub-doc array #1408</li>
<li>fixed; document#update returns a Query #1397</li>
<li>docs; readpref strategy</li>
</ul>

<h1>3.6.1 / 2013-03-27</h1>

<ul>
<li>added; populate support to findAndModify varients #1395</li>
<li>added; text index type to schematypes</li>
<li>expose allowed index types as Schema.indexTypes</li>
<li>fixed; use of <code>setMaxListeners</code> as path</li>
<li>fixed; regression in node 0.6 on docs with &gt; 10 arrays</li>
<li>fixed; do not alter schema arguments #1364</li>
<li>fixed; subdoc#ownerDocument() #1385</li>
<li>website; change search id</li>
<li>website; add search from google <a href="https://github.com/jackdbernier">jackdbernier</a></li>
<li>website; fix link</li>
<li>website; add 3.5.x docs release</li>
<li>website; fix link</li>
<li>docs; fix geometry</li>
<li>docs; hide internal constructor</li>
<li>docs; aggregation does not cast arguments #1399</li>
<li>docs; querystream options</li>
<li>examples; added for population</li>
</ul>

<h1>3.6.0 / 2013-03-18</h1>

<ul>
<li>changed; cast &#39;true&#39;/&#39;false&#39; to boolean #1282 <a href="https://github.com/mgrach">mgrach</a></li>
<li>changed; Buffer arrays can now contain nulls</li>
<li>added; QueryStream transform option</li>
<li>added; support for authSource driver option</li>
<li>added; {mongoose,db}.modelNames()</li>
<li>added; $push w/ $slice,$sort support (MongoDB 2.4)</li>
<li>added; hashed index type (MongoDB 2.4)</li>
<li>added; support for mongodb 2.4 geojson (MongoDB 2.4)</li>
<li>added; value at time of validation error</li>
<li>added; support for object literal schemas</li>
<li>added; bufferCommands schema option</li>
<li>added; allow auth option in connections #1360 <a href="https://github.com/geoah">geoah</a></li>
<li>added; performance improvements to populate() <a href="https://github.com/LearnBoost/mongoose/commit/263ece9">263ece9</a></li>
<li>added; allow adding uncasted docs to populated arrays and properties #570</li>
<li>added; doc#populated(path) stores original populated _ids</li>
<li>added; lean population #1260</li>
<li>added; query.populate() now accepts an options object</li>
<li>added; document#populate(opts, callback)</li>
<li>added; Model.populate(docs, opts, callback)</li>
<li>added; support for rich nested path population</li>
<li>added; doc.array.remove(value) subdoc with _id value support #1278</li>
<li>added; optionally allow non-strict sets and updates</li>
<li>added; promises/A+ comformancy with <a href="https://github.com/aheckmann/mpromise">mpromise</a></li>
<li>added; promise#then</li>
<li>added; promise#end</li>
<li>fixed; use of <code>model</code> as doc property</li>
<li>fixed; lean population #1382</li>
<li>fixed; empty object mixed defaults #1380</li>
<li>fixed; populate w/ deselected _id using string syntax</li>
<li>fixed; attempted save of divergent populated arrays #1334 related</li>
<li>fixed; better error msg when attempting toObject as property name</li>
<li>fixed; non population buffer casting from doc</li>
<li>fixed; setting populated paths #570</li>
<li>fixed; casting when added docs to populated arrays #570</li>
<li>fixed; prohibit updating arrays selected with $elemMatch #1334</li>
<li>fixed; pull / set subdoc combination #1303</li>
<li>fixed; multiple bg index creation #1365</li>
<li>fixed; manual reconnection to single mongod</li>
<li>fixed; Constructor / version exposure #1124</li>
<li>fixed; CastError race condition</li>
<li>fixed; no longer swallowing misuse of subdoc#invalidate()</li>
<li>fixed; utils.clone retains RegExp opts</li>
<li>fixed; population of non-schema property</li>
<li>fixed; allow updating versionKey #1265</li>
<li>fixed; add EventEmitter props to reserved paths #1338</li>
<li>fixed; can now deselect populated doc _ids #1331</li>
<li>fixed; properly pass subtype to Binary in MongooseBuffer</li>
<li>fixed; casting _id from document with non-ObjectId _id</li>
<li>fixed; specifying schema type edge case { path: [{type: &ldquo;String&rdquo; }] }</li>
<li>fixed; typo in schemdate #1329 <a href="https://github.com/jplock">jplock</a></li>
<li>updated; driver to 1.2.14</li>
<li>updated; muri to 0.3.1</li>
<li>updated; mpromise to 0.2.1</li>
<li>updated; mocha 1.8.1</li>
<li>updated; mpath to 0.1.1</li>
<li>deprecated; pluralization will die in 4.x</li>
<li>refactor; rename private methods to something unusable as doc properties</li>
<li>refactor MongooseArray#remove</li>
<li>refactor; move expires index to SchemaDate #1328</li>
<li>refactor; internal document properties #1171 #1184</li>
<li>tests; added</li>
<li>docs; indexes</li>
<li>docs; validation</li>
<li>docs; populate</li>
<li>docs; populate</li>
<li>docs; add note about stream compatibility with node 0.8</li>
<li>docs; fix for private names</li>
<li>docs; Buffer -&gt; mongodb.Binary #1363</li>
<li>docs; auth options</li>
<li>docs; improved</li>
<li>website; update FAQ</li>
<li>website; add more api links</li>
<li>website; add 3.5.x docs to prior releases</li>
<li>website; Change mongoose-types to an active repo <a href="https://github.com/jackdbernier">jackdbernier</a></li>
<li>website; compat with node 0.10</li>
<li>website; add news section</li>
<li>website; use T for generic type</li>
<li>benchmark; make adjustable</li>
</ul>

<h1>3.6.0rc1 / 2013-03-12</h1>

<ul>
<li>refactor; rename private methods to something unusable as doc properties</li>
<li>added; {mongoose,db}.modelNames()</li>
<li>added; $push w/ $slice,$sort support (MongoDB 2.4)</li>
<li>added; hashed index type (MongoDB 2.4)</li>
<li>added; support for mongodb 2.4 geojson (MongoDB 2.4)</li>
<li>added; value at time of validation error</li>
<li>added; support for object literal schemas</li>
<li>added; bufferCommands schema option</li>
<li>added; allow auth option in connections #1360 <a href="https://github.com/geoah">geoah</a></li>
<li>fixed; lean population #1382</li>
<li>fixed; empty object mixed defaults #1380</li>
<li>fixed; populate w/ deselected _id using string syntax</li>
<li>fixed; attempted save of divergent populated arrays #1334 related</li>
<li>fixed; better error msg when attempting toObject as property name</li>
<li>fixed; non population buffer casting from doc</li>
<li>fixed; setting populated paths #570</li>
<li>fixed; casting when added docs to populated arrays #570</li>
<li>fixed; prohibit updating arrays selected with $elemMatch #1334</li>
<li>fixed; pull / set subdoc combination #1303</li>
<li>fixed; multiple bg index creation #1365</li>
<li>fixed; manual reconnection to single mongod</li>
<li>fixed; Constructor / version exposure #1124</li>
<li>fixed; CastError race condition</li>
<li>fixed; no longer swallowing misuse of subdoc#invalidate()</li>
<li>fixed; utils.clone retains RegExp opts</li>
<li>fixed; population of non-schema property</li>
<li>fixed; allow updating versionKey #1265</li>
<li>fixed; add EventEmitter props to reserved paths #1338</li>
<li>fixed; can now deselect populated doc _ids #1331</li>
<li>updated; muri to 0.3.1</li>
<li>updated; driver to 1.2.12</li>
<li>updated; mpromise to 0.2.1</li>
<li>deprecated; pluralization will die in 4.x</li>
<li>docs; Buffer -&gt; mongodb.Binary #1363</li>
<li>docs; auth options</li>
<li>docs; improved</li>
<li>website; add news section</li>
<li>benchmark; make adjustable</li>
</ul>

<h1>3.6.0rc0 / 2013-02-03</h1>

<ul>
<li>changed; cast &#39;true&#39;/&#39;false&#39; to boolean #1282 <a href="https://github.com/mgrach">mgrach</a></li>
<li>changed; Buffer arrays can now contain nulls</li>
<li>fixed; properly pass subtype to Binary in MongooseBuffer</li>
<li>fixed; casting _id from document with non-ObjectId _id</li>
<li>fixed; specifying schema type edge case { path: [{type: &ldquo;String&rdquo; }] }</li>
<li>fixed; typo in schemdate #1329 <a href="https://github.com/jplock">jplock</a></li>
<li>refactor; move expires index to SchemaDate #1328</li>
<li>refactor; internal document properties #1171 #1184</li>
<li>added; performance improvements to populate() <a href="https://github.com/LearnBoost/mongoose/commit/263ece9">263ece9</a></li>
<li>added; allow adding uncasted docs to populated arrays and properties #570</li>
<li>added; doc#populated(path) stores original populated _ids</li>
<li>added; lean population #1260</li>
<li>added; query.populate() now accepts an options object</li>
<li>added; document#populate(opts, callback)</li>
<li>added; Model.populate(docs, opts, callback)</li>
<li>added; support for rich nested path population</li>
<li>added; doc.array.remove(value) subdoc with _id value support #1278</li>
<li>added; optionally allow non-strict sets and updates</li>
<li>added; promises/A+ comformancy with <a href="https://github.com/aheckmann/mpromise">mpromise</a></li>
<li>added; promise#then</li>
<li>added; promise#end</li>
<li>updated; mocha 1.8.1</li>
<li>updated; muri to 0.3.0</li>
<li>updated; mpath to 0.1.1</li>
<li>updated; docs</li>
</ul>

<h1>3.5.16 / 2013-08-13</h1>

<ul>
<li>updated; driver to 1.3.18</li>
</ul>

<h1>3.5.15 / 2013-07-26</h1>

<ul>
<li>updated; sliced to 0.0.5</li>
<li>updated; driver to 1.3.12</li>
<li>fixed; regression in Query#count() due to driver change</li>
<li>tests; fixed timeouts</li>
<li>tests; handle differing test uris</li>
</ul>

<h1>3.5.14 / 2013-05-15</h1>

<ul>
<li>updated; driver to 1.3.5</li>
<li>fixed; compat w/ Object.create(null) #1484 #1485</li>
<li>fixed; cloning objects missing constructors</li>
<li>fixed; prevent multiple min number validators #1481 <a href="https://github.com/nrako">nrako</a></li>
</ul>

<h1>3.5.13 / 2013-05-09</h1>

<ul>
<li>update driver to 1.3.3</li>
<li>fixed; use of $options in array #1462</li>
</ul>

<h1>3.5.12 / 2013-04-25</h1>

<ul>
<li>updated; driver to 1.3.0</li>
<li>fixed; connection.model should retain options #1458 <a href="https://github.com/vedmalex">vedmalex</a></li>
<li>fixed; read pref typos #1422 <a href="https://github.com/kyano">kyano</a></li>
</ul>

<h1>3.5.11 / 2013-04-03</h1>

<ul>
<li>fixed; +field conflict with $slice #1370</li>
<li>fixed; RangeError in ValidationError.toString() #1296</li>
<li>fixed; nested deselection conflict #1333</li>
<li>remove time from Makefile</li>
</ul>

<h1>3.5.10 / 2013-04-02</h1>

<ul>
<li>fixed; setting subdocuments deeply nested fields #1394</li>
<li>fixed; do not alter schema arguments #1364</li>
</ul>

<h1>3.5.9 / 2013-03-15</h1>

<ul>
<li>updated; driver to 1.2.14</li>
<li>added; support for authSource driver option (mongodb 2.4)</li>
<li>added; QueryStream transform option (node 0.10 helper)</li>
<li>fixed; backport for saving required populated buffers</li>
<li>fixed; pull / set subdoc combination #1303</li>
<li>fixed; multiple bg index creation #1365</li>
<li>test; added for saveable required populated buffers</li>
<li>test; added for #1365</li>
<li>test; add authSource test</li>
</ul>

<h1>3.5.8 / 2013-03-12</h1>

<ul>
<li>added; auth option in connection <a href="https://github.com/geoah">geoah</a></li>
<li>fixed; CastError race condition</li>
<li>docs; add note about stream compatibility with node 0.8</li>
</ul>

<h1>3.5.7 / 2013-02-22</h1>

<ul>
<li>updated; driver to 1.2.13</li>
<li>updated; muri to 0.3.1 #1347</li>
<li>fixed; utils.clone retains RegExp opts #1355</li>
<li>fixed; deepEquals RegExp support</li>
<li>tests; fix a connection test</li>
<li>website; clean up docs <a href="https://github.com/afshinm">afshinm</a></li>
<li>website; update homepage</li>
<li>website; migragtion: emphasize impact of strict docs #1264</li>
</ul>

<h1>3.5.6 / 2013-02-14</h1>

<ul>
<li>updated; driver to 1.2.12</li>
<li>fixed; properly pass Binary subtype</li>
<li>fixed; add EventEmitter props to reserved paths #1338</li>
<li>fixed; use correct node engine version</li>
<li>fixed; display empty docs as {} in log output #953 follow up</li>
<li>improved; &ldquo;bad $within $box argument&rdquo; error message</li>
<li>populate; add unscientific benchmark</li>
<li>website; add stack overflow to help section</li>
<li>website; use better code font #1336 <a href="https://github.com/risseraka">risseraka</a></li>
<li>website; clarify where help is available</li>
<li>website; fix source code links #1272 <a href="https://github.com/floatingLomas">floatingLomas</a></li>
<li>docs; be specific about _id schema option #1103</li>
<li>docs; add ensureIndex error handling example</li>
<li>docs; README</li>
<li>docs; CONTRIBUTING.md</li>
</ul>

<h1>3.5.5 / 2013-01-29</h1>

<ul>
<li>updated; driver to 1.2.11</li>
<li>removed; old node &lt; 0.6x shims</li>
<li>fixed; documents with Buffer _ids equality</li>
<li>fixed; MongooseBuffer properly casts numbers</li>
<li>fixed; reopening closed connection on alt host/port #1287</li>
<li>docs; fixed typo in Readme #1298 <a href="https://github.com/rened">rened</a></li>
<li>docs; fixed typo in migration docs <a href="https://github.com/Prinzhorn">Prinzhorn</a></li>
<li>docs; fixed incorrect annotation in SchemaNumber#min <a href="https://github.com/bilalq">bilalq</a></li>
<li>docs; updated</li>
</ul>

<h1>3.5.4 / 2013-01-07</h1>

<ul>
<li>changed; &ldquo;_pres&rdquo; &amp; &ldquo;_posts&rdquo; are now reserved pathnames #1261</li>
<li>updated; driver to 1.2.8</li>
<li>fixed; exception when reopening a replica set. #1263 <a href="https://github.com/ethankan">ethankan</a></li>
<li>website; updated</li>
</ul>

<h1>3.5.3 / 2012-12-26</h1>

<ul>
<li>added; support for geo object notation #1257</li>
<li>fixed; $within query casting with arrays</li>
<li>fixed; unix domain socket support #1254</li>
<li>updated; driver to 1.2.7</li>
<li>updated; muri to 0.0.5</li>
</ul>

<h1>3.5.2 / 2012-12-17</h1>

<ul>
<li>fixed; using auth with replica sets #1253</li>
</ul>

<h1>3.5.1 / 2012-12-12</h1>

<ul>
<li>fixed; regression when using subdoc with <code>path</code> as pathname #1245 <a href="https://github.com/daeq">daeq</a></li>
<li>fixed; safer db option checks</li>
<li>updated; driver to 1.2.5</li>
<li>website; add more examples</li>
<li>website; clean up old docs</li>
<li>website; fix prev release urls</li>
<li>docs; clarify streaming with HTTP responses</li>
</ul>

<h1>3.5.0 / 2012-12-10</h1>

<ul>
<li>added; paths to CastErrors #1239</li>
<li>added; support for mongodb connection string spec #1187</li>
<li>added; post validate event</li>
<li>added; Schema#get (to retrieve schema options)</li>
<li>added; VersionError #1071</li>
<li>added; npmignore <a href="https://github.com/hidekiy">hidekiy</a></li>
<li>update; driver to 1.2.3</li>
<li>fixed; stackoverflow in setter #1234</li>
<li>fixed; utils.isObject()</li>
<li>fixed; do not clobber user specified driver writeConcern #1227</li>
<li>fixed; always pass current document to post hooks</li>
<li>fixed; throw error when user attempts to overwrite a model</li>
<li>fixed; connection.model only caches on connection #1209</li>
<li>fixed; respect conn.model() creation when matching global model exists #1209</li>
<li>fixed; passing model name + collection name now always honors collection name</li>
<li>fixed; setting virtual field to an empty object #1154</li>
<li>fixed; subclassed MongooseErrors exposure, now available in mongoose.Error.xxxx</li>
<li>fixed; model.remove() ignoring callback when executed twice <a href="https://github.com/daeq">daeq</a> #1210</li>
<li>docs; add collection option to schema api docs #1222</li>
<li>docs; NOTE about db safe options</li>
<li>docs; add post hooks docs</li>
<li>docs; connection string options</li>
<li>docs; middleware is not executed with Model.remove #1241</li>
<li>docs; {g,s}etter introspection #777</li>
<li>docs; update validation docs</li>
<li>docs; add link to plugins page</li>
<li>docs; clarify error returned by unique indexes #1225</li>
<li>docs; more detail about disabling autoIndex behavior</li>
<li>docs; add homepage section to package (npm docs mongoose)</li>
<li>docs; more detail around collection name pluralization #1193</li>
<li>website; add .important css</li>
<li>website; update models page</li>
<li>website; update getting started</li>
<li>website; update quick start</li>
</ul>

<h1>3.4.0 / 2012-11-10</h1>

<ul>
<li>added; support for generic toJSON/toObject transforms #1160 #1020 #1197</li>
<li>added; doc.set() merge support #1148 <a href="https://github.com/NuORDER">NuORDER</a></li>
<li>added; query#add support #1188 <a href="https://github.com/aleclofabbro">aleclofabbro</a></li>
<li>changed; adding invalid nested paths to non-objects throws 4216f14</li>
<li>changed; fixed; stop invalid function cloning (internal fix)</li>
<li>fixed; add query $and casting support #1180 <a href="https://github.com/anotheri">anotheri</a></li>
<li>fixed; overwriting of query arguments #1176</li>
<li>docs; fix expires examples</li>
<li>docs; transforms</li>
<li>docs; schema <code>collection</code> option docs <a href="https://github.com/hermanjunge">hermanjunge</a></li>
<li>website; updated</li>
<li>tests; added</li>
</ul>

<h1>3.3.1 / 2012-10-11</h1>

<ul>
<li>fixed; allow goose.connect(uris, dbname, opts) #1144</li>
<li>docs; persist API private checked state across page loads</li>
</ul>

<h1>3.3.0 / 2012-10-10</h1>

<ul>
<li>fixed; passing options as 2nd arg to connect() #1144</li>
<li>fixed; race condition after no-op save #1139</li>
<li>fixed; schema field selection application in findAndModify #1150</li>
<li>fixed; directly setting arrays #1126</li>
<li>updated; driver to 1.1.11</li>
<li>updated; collection pluralization rules <a href="https://github.com/mrickard">mrickard</a></li>
<li>tests; added</li>
<li>docs; updated</li>
</ul>

<h1>3.2.2 / 2012-10-08</h1>

<ul>
<li>updated; driver to 1.1.10 #1143</li>
<li>updated; use sliced 0.0.3</li>
<li>fixed; do not recast embedded docs unnecessarily</li>
<li>fixed; expires schema option helper #1132</li>
<li>fixed; built in string setters #1131</li>
<li>fixed; debug output for Dates/ObjectId properties #1129</li>
<li>docs; fixed Javascript syntax error in example <a href="https://github.com/olalonde">olalonde</a></li>
<li>docs; fix toJSON example #1137</li>
<li>docs; add ensureIndex production notes</li>
<li>docs; fix spelling</li>
<li>docs; add blogposts about v3</li>
<li>website; updated</li>
<li>removed; undocumented inGroupsOf util</li>
<li>tests; added</li>
</ul>

<h1>3.2.1 / 2012-09-28</h1>

<ul>
<li>fixed; remove query batchSize option default of 1000 https://github.com/learnboost/mongoose/commit/3edaa8651</li>
<li>docs; updated</li>
<li>website; updated</li>
</ul>

<h1>3.2.0 / 2012-09-27</h1>

<ul>
<li>added; direct array index assignment with casting support <code>doc.array.set(index, value)</code></li>
<li>fixed; QueryStream#resume within same tick as pause() #1116</li>
<li>fixed; default value validatation #1109</li>
<li>fixed; array splice() not casting #1123</li>
<li>fixed; default array construction edge case #1108</li>
<li>fixed; query casting for inequalities in arrays #1101 <a href="https://github.com/dpatti">dpatti</a></li>
<li>tests; added</li>
<li>website; more documentation</li>
<li>website; fixed layout issue #1111 <a href="https://github.com/SlashmanX">SlashmanX</a></li>
<li>website; refactored <a href="https://github.com/guille">guille</a></li>
</ul>

<h1>3.1.2 / 2012-09-10</h1>

<ul>
<li>added; ReadPreferrence schema option #1097</li>
<li>updated; driver to 1.1.7</li>
<li>updated; default query batchSize to 1000</li>
<li>fixed; we now cast the mapReduce query option #1095</li>
<li>fixed; $elemMatch+$in with field selection #1091</li>
<li>fixed; properly cast $elemMatch+$in conditions #1100</li>
<li>fixed; default field application of subdocs #1027</li>
<li>fixed; querystream prematurely dying #1092</li>
<li>fixed; querystream never resumes when paused at getMore boundries #1092</li>
<li>fixed; querystream occasionally emits data events after destroy #1092</li>
<li>fixed; remove unnecessary ObjectId creation in querystream</li>
<li>fixed; allow ne(boolean) again #1093</li>
<li>docs; add populate/field selection syntax notes</li>
<li>docs; add toObject/toJSON options detail</li>
<li>docs; <code>read</code> schema option</li>
</ul>

<h1>3.1.1 / 2012-08-31</h1>

<ul>
<li>updated; driver to 1.1.6</li>
</ul>

<h1>3.1.0 / 2012-08-29</h1>

<ul>
<li>changed; fixed; directly setting nested objects now overwrites entire object (previously incorrectly merged them)</li>
<li>added; read pref support (mongodb 2.2) 205a709c</li>
<li>added; aggregate support (mongodb 2.2) f3a5bd3d</li>
<li>added; virtual {g,s}etter introspection (#1070)</li>
<li>updated; docs <a href="https://github.com/brettz9">brettz9</a></li>
<li>updated; driver to 1.1.5</li>
<li>fixed; retain virtual setter return values (#1069)</li>
</ul>

<h1>3.0.3 / 2012-08-23</h1>

<ul>
<li>fixed; use of nested paths beginning w/ numbers #1062</li>
<li>fixed; query population edge case #1053 #1055 <a href="https://github.com/jfremy">jfremy</a></li>
<li>fixed; simultaneous top and sub level array modifications #1073</li>
<li>added; id and _id schema option aliases + tests</li>
<li>improve debug formatting to allow copy/paste logged queries into mongo shell <a href="https://github.com/eknkc">eknkc</a></li>
<li>docs</li>
</ul>

<h1>3.0.2 / 2012-08-17</h1>

<ul>
<li>added; missing support for v3 sort/select syntax to findAndModify helpers (#1058)</li>
<li>fixed; replset fullsetup event emission</li>
<li>fixed; reconnected event for replsets</li>
<li>fixed; server reconnection setting discovery</li>
<li>fixed; compat with non-schema path props using positional notation (#1048)</li>
<li>fixed; setter/casting order (#665)</li>
<li>docs; updated</li>
</ul>

<h1>3.0.1 / 2012-08-11</h1>

<ul>
<li>fixed; throw Error on bad validators (1044)</li>
<li>fixed; typo in EmbeddedDocument#parentArray [lackac]</li>
<li>fixed; repair mongoose.SchemaTypes alias</li>
<li>updated; docs</li>
</ul>

<h1>3.0.0 / 2012-08-07</h1>

<ul>
<li>removed; old subdocument#commit method</li>
<li>fixed; setting arrays of matching docs [6924cbc2]</li>
<li>fixed; doc!remove event now emits in save order as save for consistency</li>
<li>fixed; pre-save hooks no longer fire on subdocuments when validation fails</li>
<li>added; subdoc#parent() and subdoc#parentArray() to access subdocument parent objects</li>
<li>added; query#lean() helper</li>
</ul>

<h1>3.0.0rc0 / 2012-08-01</h1>

<ul>
<li>fixed; allow subdoc literal declarations containing &ldquo;type&rdquo; pathname (#993)</li>
<li>fixed; unsetting a default array (#758)</li>
<li>fixed; boolean $in queries (#998)</li>
<li>fixed; allow use of <code>options</code> as a pathname (#529)</li>
<li>fixed; <code>model</code> is again a permitted schema path name</li>
<li>fixed; field selection option on subdocs (#1022)</li>
<li>fixed; handle another edge case with subdoc saving (#975)</li>
<li>added; emit save err on model if listening</li>
<li>added; MongoDB TTL collection support (#1006)</li>
<li>added; $center options support</li>
<li>added; $nearSphere and $polygon support</li>
<li>updated; driver version to 1.1.2</li>
</ul>

<h1>3.0.0alpha2 / 2012-07-18</h1>

<ul>
<li>changed; index errors are now emitted on their model and passed to an optional callback (#984)</li>
<li>fixed; specifying index along with sparse/unique option no longer overwrites (#1004)</li>
<li>fixed; never swallow connection errors (#618)</li>
<li>fixed; creating object from model with emded object no longer overwrites defaults <a href="#859">achurkin</a></li>
<li>fixed; stop needless validation of unchanged/unselected fields (#891)</li>
<li>fixed; document#equals behavior of objectids (#974)</li>
<li>fixed; honor the minimize schema option (#978)</li>
<li>fixed; provide helpful error msgs when reserved schema path is used (#928)</li>
<li>fixed; callback to conn#disconnect is optional (#875)</li>
<li>fixed; handle missing protocols in connection urls (#987)</li>
<li>fixed; validate args to query#where (#969)</li>
<li>fixed; saving modified/removed subdocs (#975)</li>
<li>fixed; update with $pull from Mixed array (#735)</li>
<li>fixed; error with null shard key value</li>
<li>fixed; allow unsetting enums (#967)</li>
<li>added; support for manual index creation (#984)</li>
<li>added; support for disabled auto-indexing (#984)</li>
<li>added; support for preserving MongooseArray#sort changes (#752)</li>
<li>added; emit state change events on connection</li>
<li>added; support for specifying BSON subtype in MongooseBuffer#toObject [jcrugzz]</li>
<li>added; support for disabled versioning (#977)</li>
<li>added; implicit &ldquo;new&rdquo; support for models and Schemas</li>
</ul>

<h1>3.0.0alpha1 / 2012-06-15</h1>

<ul>
<li>removed; doc#commit (use doc#markModified)</li>
<li>removed; doc.modified getter (#950)</li>
<li>removed; mongoose{connectSet,createSetConnection}. use connect,createConnection instead</li>
<li>removed; query alias methods 1149804c</li>
<li>removed; MongooseNumber</li>
<li>changed; now creating indexes in background by default</li>
<li>changed; strict mode now enabled by default (#952)</li>
<li>changed; doc#modifiedPaths is now a method (#950)</li>
<li>changed; getters no longer cast (#820); casting happens during set</li>
<li>fixed; no need to pass updateArg to findOneAndUpdate (#931)</li>
<li>fixed: utils.merge bug when merging nested non-objects. [treygriffith]</li>
<li>fixed; strict:throw should produce errors in findAndModify (#963)</li>
<li>fixed; findAndUpdate no longer overwrites document (#962)</li>
<li>fixed; setting default DocumentArrays (#953)</li>
<li>fixed; selection of _id with schema deselection (#954)</li>
<li>fixed; ensure promise#error emits instanceof Error</li>
<li>fixed; CursorStream: No stack overflow on any size result (#929)</li>
<li>fixed; doc#remove now passes safe options</li>
<li>fixed; invalid use of $set during $pop</li>
<li>fixed; array#{$pop,$shift} mirror MongoDB behavior</li>
<li>fixed; no longer test non-required vals in string match (#934)</li>
<li>fixed; edge case with doc#inspect</li>
<li>fixed; setter order (#665)</li>
<li>fixed; setting invalid paths in strict mode (#916)</li>
<li>fixed; handle docs without id in DocumentArray#id method (#897)</li>
<li>fixed; do not save virtuals during model.update (#894)</li>
<li>fixed; sub doc toObject virtuals application (#889)</li>
<li>fixed; MongooseArray#pull of ObjectId (#881)</li>
<li>fixed; handle passing db name with any repl set string</li>
<li>fixed; default application of selected fields (#870)</li>
<li>fixed; subdoc paths reported in validation errors (#725)</li>
<li>fixed; incorrect reported num of affected docs in update ops (#862)</li>
<li>fixed; connection assignment in Model#model (#853)</li>
<li>fixed; stringifying arrays of docs (#852)</li>
<li>fixed; modifying subdoc and parent array works (#842)</li>
<li>fixed; passing undefined to next hook (#785)</li>
<li>fixed; Query#{update,remove}() works without callbacks (#788)</li>
<li>fixed; set/updating nested objects by parent pathname (#843)</li>
<li>fixed; allow null in number arrays (#840)</li>
<li>fixed; isNew on sub doc after insertion error (#837)</li>
<li>fixed; if an insert fails, set isNew back to false [boutell]</li>
<li>fixed; isSelected when only _id is selected (#730)</li>
<li>fixed; setting an unset default value (#742)</li>
<li>fixed; query#sort error messaging (#671)</li>
<li>fixed; support for passing $options with $regex</li>
<li>added; array of object literal notation in schema creates DocumentArrays</li>
<li>added; gt,gte,lt,lte query support for arrays (#902)</li>
<li>added; capped collection support (#938)</li>
<li>added; document versioning support</li>
<li>added; inclusion of deselected schema path (#786)</li>
<li>added; non-atomic array#pop</li>
<li>added; EmbeddedDocument constructor is now exposed in DocArray#create 7cf8beec</li>
<li>added; mapReduce support (#678)</li>
<li>added; support for a configurable minimize option #to{Object,JSON}(option) (#848)</li>
<li>added; support for strict: <code>throws</code> [regality]</li>
<li>added; support for named schema types (#795)</li>
<li>added; to{Object,JSON} schema options (#805)</li>
<li>added; findByIdAnd{Update,Remove}()</li>
<li>added; findOneAnd{Update,Remove}()</li>
<li>added; query.setOptions()</li>
<li>added; instance.update() (#794)</li>
<li>added; support specifying model in populate() [DanielBaulig]</li>
<li>added; <code>lean</code> query option [gitfy]</li>
<li>added; multi-atomic support to MongooseArray#nonAtomicPush</li>
<li>added; support for $set + other $atomic ops on single array</li>
<li>added; tests</li>
<li>updated; driver to 1.0.2</li>
<li>updated; query.sort() syntax to mirror query.select()</li>
<li>updated; clearer cast error msg for array numbers</li>
<li>updated; docs</li>
<li>updated; doc.clone 3x faster (#950)</li>
<li>updated; only create _id if necessary (#950)</li>
</ul>

<h1>2.7.3 / 2012-08-01</h1>

<ul>
<li>fixed; boolean $in queries (#998)</li>
<li>fixed field selection option on subdocs (#1022)</li>
</ul>

<h1>2.7.2 / 2012-07-18</h1>

<ul>
<li>fixed; callback to conn#disconnect is optional (#875)</li>
<li>fixed; handle missing protocols in connection urls (#987)</li>
<li>fixed; saving modified/removed subdocs (#975)</li>
<li>updated; tests</li>
</ul>

<h1>2.7.1 / 2012-06-26</h1>

<ul>
<li>fixed; sharding: when a document holds a null as a value of the shard key</li>
<li>fixed; update() using $pull on an array of Mixed (gh-735)</li>
<li>deprecated; MongooseNumber#{inc, increment, decrement} methods</li>
<li>tests; now using mocha</li>
</ul>

<h1>2.7.0 / 2012-06-14</h1>

<ul>
<li>added; deprecation warnings to methods being removed in 3.x</li>
</ul>

<h1>2.6.8 / 2012-06-14</h1>

<ul>
<li>fixed; edge case when using &#39;options&#39; as a path name (#961)</li>
</ul>

<h1>2.6.7 / 2012-06-08</h1>

<ul>
<li>fixed; ensure promise#error always emits instanceof Error</li>
<li>fixed; selection of _id w/ another excluded path (#954)</li>
<li>fixed; setting default DocumentArrays (#953)</li>
</ul>

<h1>2.6.6 / 2012-06-06</h1>

<ul>
<li>fixed; stack overflow in query stream with large result sets (#929)</li>
<li>added; $gt, $gte, $lt, $lte support to arrays (#902)</li>
<li>fixed; pass option <code>safe</code> along to doc#remove() calls</li>
</ul>

<h1>2.6.5 / 2012-05-24</h1>

<ul>
<li>fixed; do not save virtuals in Model.update (#894)</li>
<li>added; missing $ prefixed query aliases (going away in 3.x) (#884) [timoxley]</li>
<li>fixed; setting invalid paths in strict mode (#916)</li>
<li>fixed; resetting isNew after insert failure (#837) [boutell]</li>
</ul>

<h1>2.6.4 / 2012-05-15</h1>

<ul>
<li>updated; backport string regex $options to 2.x</li>
<li>updated; use driver 1.0.2 (performance improvements) (#914)</li>
<li>fixed; calling MongooseDocumentArray#id when the doc has no _id (#897)</li>
</ul>

<h1>2.6.3 / 2012-05-03</h1>

<ul>
<li>fixed; repl-set connectivity issues during failover on MongoDB 2.0.1</li>
<li>updated; driver to 1.0.0</li>
<li>fixed; virtuals application of subdocs when using toObject({ virtuals: true }) (#889)</li>
<li>fixed; MongooseArray#pull of ObjectId correctly updates the array itself (#881)</li>
</ul>

<h1>2.6.2 / 2012-04-30</h1>

<ul>
<li>fixed; default field application of selected fields (#870)</li>
</ul>

<h1>2.6.1 / 2012-04-30</h1>

<ul>
<li>fixed; connection assignment in mongoose#model (#853, #877)</li>
<li>fixed; incorrect reported num of affected docs in update ops (#862)</li>
</ul>

<h1>2.6.0 / 2012-04-19</h1>

<ul>
<li>updated; hooks.js to 0.2.1</li>
<li>fixed; issue with passing undefined to a hook callback. thanks to [chrisleishman] for reporting.</li>
<li>fixed; updating/setting nested objects in strict schemas (#843) as reported by [kof]</li>
<li>fixed; Query#{update,remove}() work without callbacks again (#788)</li>
<li>fixed; modifying subdoc along with parent array $atomic op (#842)</li>
</ul>

<h1>2.5.14 / 2012-04-13</h1>

<ul>
<li>fixed; setting an unset default value (#742)</li>
<li>fixed; doc.isSelected(otherpath) when only _id is selected (#730)</li>
<li>updated; docs</li>
</ul>

<h1>2.5.13 / 2012-03-22</h1>

<ul>
<li>fixed; failing validation of unselected required paths (#730,#713)</li>
<li>fixed; emitting connection error when only one listener (#759)</li>
<li>fixed; MongooseArray#splice was not returning values (#784) [chrisleishman]</li>
</ul>

<h1>2.5.12 / 2012-03-21</h1>

<ul>
<li>fixed; honor the <code>safe</code> option in all ensureIndex calls</li>
<li>updated; node-mongodb-native driver to 0.9.9-7</li>
</ul>

<h1>2.5.11 / 2012-03-15</h1>

<ul>
<li>added; introspection for getters/setters (#745)</li>
<li>updated; node-mongodb-driver to 0.9.9-5</li>
<li>added; tailable method to Query (#769) [holic]</li>
<li>fixed; Number min/max validation of null (#764) [btamas]</li>
<li>added; more flexible user/password connection options (#738) [KarneAsada]</li>
</ul>

<h1>2.5.10 / 2012-03-06</h1>

<ul>
<li>updated; node-mongodb-native driver to 0.9.9-4</li>
<li>added; Query#comment()</li>
<li>fixed; allow unsetting arrays</li>
<li>fixed; hooking the set method of subdocuments (#746)</li>
<li>fixed; edge case in hooks</li>
<li>fixed; allow $id and $ref in queries (fixes compatibility with mongoose-dbref) (#749) [richtera]</li>
<li>added; default path selection to SchemaTypes</li>
</ul>

<h1>2.5.9 / 2012-02-22</h1>

<ul>
<li>fixed; properly cast nested atomic update operators for sub-documents</li>
</ul>

<h1>2.5.8 / 2012-02-21</h1>

<ul>
<li>added; post &#39;remove&#39; middleware includes model that was removed (#729) [timoxley]</li>
</ul>

<h1>2.5.7 / 2012-02-09</h1>

<ul>
<li>fixed; RegExp validators on node &gt;= v0.6.x</li>
</ul>

<h1>2.5.6 / 2012-02-09</h1>

<ul>
<li>fixed; emit errors returned from db.collection() on the connection (were being swallowed)</li>
<li>added; can add multiple validators in your schema at once (#718) [diogogmt]</li>
<li>fixed; strict embedded documents (#717)</li>
<li>updated; docs [niemyjski]</li>
<li>added; pass number of affected docs back in model.update/save</li>
</ul>

<h1>2.5.5 / 2012-02-03</h1>

<ul>
<li>fixed; RangeError: maximum call stack exceed error when removing docs with Number _id (#714)</li>
</ul>

<h1>2.5.4 / 2012-02-03</h1>

<ul>
<li>fixed; RangeError: maximum call stack exceed error (#714)</li>
</ul>

<h1>2.5.3 / 2012-02-02</h1>

<ul>
<li>added; doc#isSelected(path)</li>
<li>added; query#equals()</li>
<li>added; beta sharding support</li>
<li>added; more descript error msgs (#700) [obeleh]</li>
<li>added; document.modifiedPaths (#709) [ljharb]</li>
<li>fixed; only functions can be added as getters/setters (#707,704) [ljharb]</li>
</ul>

<h1>2.5.2 / 2012-01-30</h1>

<ul>
<li>fixed; rollback -native driver to 0.9.7-3-5 (was causing timeouts and other replica set weirdness)</li>
<li>deprecated; MongooseNumber (will be moved to a separate repo for 3.x)</li>
<li>added; init event is emitted on schemas</li>
</ul>

<h1>2.5.1 / 2012-01-27</h1>

<ul>
<li>fixed; honor strict schemas in Model.update (#699)</li>
</ul>

<h1>2.5.0 / 2012-01-26</h1>

<ul>
<li>added; doc.toJSON calls toJSON on embedded docs when exists [jerem]</li>
<li>added; populate support for refs of type Buffer (#686) [jerem]</li>
<li>added; $all support for ObjectIds and Dates (#690)</li>
<li>fixed; virtual setter calling on instantiation when strict: true (#682) [hunterloftis]</li>
<li>fixed; doc construction triggering getters (#685)</li>
<li>fixed; MongooseBuffer check in deepEquals (#688)</li>
<li>fixed; range error when using Number _ids with <code>instance.save()</code> (#691)</li>
<li>fixed; isNew on embedded docs edge case (#680)</li>
<li>updated; driver to 0.9.8-3</li>
<li>updated; expose <code>model()</code> method within static methods</li>
</ul>

<h1>2.4.10 / 2012-01-10</h1>

<ul>
<li>added; optional getter application in .toObject()/.toJSON() (#412)</li>
<li>fixed; nested $operators in $all queries (#670)</li>
<li>added; $nor support (#674)</li>
<li>fixed; bug when adding nested schema (#662) [paulwe]</li>
</ul>

<h1>2.4.9 / 2012-01-04</h1>

<ul>
<li>updated; driver to 0.9.7-3-5 to fix Linux performance degradation on some boxes</li>
</ul>

<h1>2.4.8 / 2011-12-22</h1>

<ul>
<li>updated; bump -native to 0.9.7.2-5</li>
<li>fixed; compatibility with date.js (#646) [chrisleishman]</li>
<li>changed; undocumented schema &ldquo;lax&rdquo; option to &ldquo;strict&rdquo;</li>
<li>fixed; default value population for strict schemas</li>
<li>updated; the nextTick helper for small performance gain. 1bee2a2</li>
</ul>

<h1>2.4.7 / 2011-12-16</h1>

<ul>
<li>fixed; bug in 2.4.6 with path setting</li>
<li>updated; bump -native to 0.9.7.2-1</li>
<li>added; strict schema option [nw]</li>
</ul>

<h1>2.4.6 / 2011-12-16</h1>

<ul>
<li>fixed; conflicting mods on update bug [sirlantis]</li>
<li>improved; doc.id getter performance</li>
</ul>

<h1>2.4.5 / 2011-12-14</h1>

<ul>
<li>fixed; bad MongooseArray behavior in 2.4.2 - 2.4.4</li>
</ul>

<h1>2.4.4 / 2011-12-14</h1>

<ul>
<li>fixed; MongooseArray#doAtomics throwing after sliced</li>
</ul>

<h1>2.4.3 / 2011-12-14</h1>

<ul>
<li>updated; system.profile schema for MongoDB 2x</li>
</ul>

<h1>2.4.2 / 2011-12-12</h1>

<ul>
<li>fixed; partially populating multiple children of subdocs (#639) [kenpratt]</li>
<li>fixed; allow Update of numbers to null (#640) [jerem]</li>
</ul>

<h1>2.4.1 / 2011-12-02</h1>

<ul>
<li>added; options support for populate() queries</li>
<li>updated; -native driver to 0.9.7-1.4</li>
</ul>

<h1>2.4.0 / 2011-11-29</h1>

<ul>
<li>added; QueryStreams (#614)</li>
<li>added; debug print mode for development</li>
<li>added; $within support to Array queries (#586) [ggoodale]</li>
<li>added; $centerSphere query support</li>
<li>fixed; $within support</li>
<li>added; $unset is now used when setting a path to undefined (#519)</li>
<li>added; query#batchSize support</li>
<li>updated; docs</li>
<li>updated; -native driver to 0.9.7-1.3 (provides Windows support)</li>
</ul>

<h1>2.3.13 / 2011-11-15</h1>

<ul>
<li>fixed; required validation for Refs (#612) [ded]</li>
<li>added; $nearSphere support for Arrays (#610)</li>
</ul>

<h1>2.3.12 / 2011-11-09</h1>

<ul>
<li>fixed; regression, objects passed to Model.update should not be changed (#605)</li>
<li>fixed; regression, empty Model.update should not be executed</li>
</ul>

<h1>2.3.11 / 2011-11-08</h1>

<ul>
<li>fixed; using $elemMatch on arrays of Mixed types (#591)</li>
<li>fixed; allow using $regex when querying Arrays (#599)</li>
<li>fixed; calling Model.update with no atomic keys (#602)</li>
</ul>

<h1>2.3.10 / 2011-11-05</h1>

<ul>
<li>fixed; model.update casting for nested paths works (#542)</li>
</ul>

<h1>2.3.9 / 2011-11-04</h1>

<ul>
<li>fixed; deepEquals check for MongooseArray returned false</li>
<li>fixed; reset modified flags of embedded docs after save [gitfy]</li>
<li>fixed; setting embedded doc with identical values no longer marks modified [gitfy]</li>
<li>updated; -native driver to 0.9.6.23 [mlazarov]</li>
<li>fixed; Model.update casting (#542, #545, #479)</li>
<li>fixed; populated refs no longer fail required validators (#577)</li>
<li>fixed; populating refs of objects with custom ids works</li>
<li>fixed; $pop &amp; $unset work with Model.update (#574)</li>
<li>added; more helpful debugging message for Schema#add (#578)</li>
<li>fixed; accessing .id when no _id exists now returns null (#590)</li>
</ul>

<h1>2.3.8 / 2011-10-26</h1>

<ul>
<li>added; callback to query#findOne is now optional (#581)</li>
</ul>

<h1>2.3.7 / 2011-10-24</h1>

<ul>
<li>fixed; wrapped save/remove callbacks in nextTick to mitigate -native swallowing thrown errors</li>
</ul>

<h1>2.3.6 / 2011-10-21</h1>

<ul>
<li>fixed; exclusion of embedded doc _id from query results (#541)</li>
</ul>

<h1>2.3.5 / 2011-10-19</h1>

<ul>
<li>fixed; calling queries without passing a callback works (#569)</li>
<li>fixed; populate() works with String and Number _ids too (#568)</li>
</ul>

<h1>2.3.4 / 2011-10-18</h1>

<ul>
<li>added; Model.create now accepts an array as a first arg</li>
<li>fixed; calling toObject on a DocumentArray with nulls no longer throws</li>
<li>fixed; calling inspect on a DocumentArray with nulls no longer throws</li>
<li>added; MongooseArray#unshift support</li>
<li>fixed; save hooks now fire on embedded documents <a href="#456">gitfy</a></li>
<li>updated; -native driver to 0.9.6-22</li>
<li>fixed; correctly pass $addToSet op instead of $push</li>
<li>fixed; $addToSet properly detects dates</li>
<li>fixed; $addToSet with multiple items works</li>
<li>updated; better node 0.6 Buffer support</li>
</ul>

<h1>2.3.3 / 2011-10-12</h1>

<ul>
<li>fixed; population conditions in multi-query settings <a href="#563">vedmalex</a></li>
<li>fixed; now compatible with Node v0.5.x</li>
</ul>

<h1>2.3.2 / 2011-10-11</h1>

<ul>
<li>fixed; population of null subdoc properties no longer hangs (#561)</li>
</ul>

<h1>2.3.1 / 2011-10-10</h1>

<ul>
<li>added; support for Query filters to populate() [eneko]</li>
<li>fixed; querying with number no longer crashes mongodb (#555) [jlbyrey]</li>
<li>updated; version of -native driver to 0.9.6-21</li>
<li>fixed; prevent query callbacks that throw errors from corrupting -native connection state</li>
</ul>

<h1>2.3.0 / 2011-10-04</h1>

<ul>
<li>fixed; nulls as default values for Boolean now works as expected</li>
<li>updated; version of -native driver to 0.9.6-20</li>
</ul>

<h1>2.2.4 / 2011-10-03</h1>

<ul>
<li>fixed; populate() works when returned array contains undefined/nulls</li>
</ul>

<h1>2.2.3 / 2011-09-29</h1>

<ul>
<li>updated; version of -native driver to 0.9.6-19</li>
</ul>

<h1>2.2.2 / 2011-09-28</h1>

<ul>
<li>added; $regex support to String [davidandrewcope]</li>
<li>added; support for other contexts like repl etc (#535)</li>
<li>fixed; clear modified state properly after saving</li>
<li>added; $addToSet support to Array</li>
</ul>

<h1>2.2.1 / 2011-09-22</h1>

<ul>
<li>more descript error when casting undefined to string</li>
<li>updated; version of -native driver to 0.9.6-18</li>
</ul>

<h1>2.2.0 / 2011-09-22</h1>

<ul>
<li>fixed; maxListeners warning on schemas with many arrays (#530)</li>
<li>changed; return / apply defaults based on fields selected in query (#423)</li>
<li>fixed; correctly detect Mixed types within schema arrays (#532)</li>
</ul>

<h1>2.1.4 / 2011-09-20</h1>

<ul>
<li>fixed; new private methods that stomped on users code</li>
<li>changed; finished removing old &ldquo;compat&rdquo; support which did nothing</li>
</ul>

<h1>2.1.3 / 2011-09-16</h1>

<ul>
<li>updated; version of -native driver to 0.9.6-15</li>
<li>added; emit <code>error</code> on connection when open fails [edwardhotchkiss]</li>
<li>added; index support to Buffers (thanks justmoon for helping track this down)</li>
<li>fixed; passing collection name via schema in conn.model() now works (thanks vedmalex for reporting)</li>
</ul>

<h1>2.1.2 / 2011-09-07</h1>

<ul>
<li>fixed; Query#find with no args no longer throws</li>
</ul>

<h1>2.1.1 / 2011-09-07</h1>

<ul>
<li>added; support Model.count(fn)</li>
<li>fixed; compatibility with node &gt;=0.4.0 &lt; 0.4.3</li>
<li>added; pass model.options.safe through with .save() so w:2, wtimeout:5000 options work [andrewjstone]</li>
<li>added; support for $type queries</li>
<li>added; support for Query#or</li>
<li>added; more tests</li>
<li>optimized populate queries</li>
</ul>

<h1>2.1.0 / 2011-09-01</h1>

<ul>
<li>changed; document#validate is a public method</li>
<li>fixed; setting number to same value no longer marks modified (#476) [gitfy]</li>
<li>fixed; Buffers shouldn&#39;t have default vals</li>
<li>added; allow specifying collection name in schema (#470) [ixti]</li>
<li>fixed; reset modified paths and atomics after saved (#459)</li>
<li>fixed; set isNew on embedded docs to false after save</li>
<li>fixed; use self to ensure proper scope of options in doOpenSet (#483) [andrewjstone]</li>
</ul>

<h1>2.0.4 / 2011-08-29</h1>

<ul>
<li>Fixed; Only send the depopulated ObjectId instead of the entire doc on save (DBRefs)</li>
<li>Fixed; Properly cast nested array values in Model.update (the data was stored in Mongo incorrectly but recast on document fetch was &ldquo;fixing&rdquo; it)</li>
</ul>

<h1>2.0.3 / 2011-08-28</h1>

<ul>
<li>Fixed; manipulating a populated array no longer causes infinite loop in BSON serializer during save (#477)</li>
<li>Fixed; populating an empty array no longer hangs foreeeeeeeever (#481)</li>
</ul>

<h1>2.0.2 / 2011-08-25</h1>

<ul>
<li>Fixed; Maintain query option key order (fixes &#39;bad hint&#39; error from compound query hints)</li>
</ul>

<h1>2.0.1 / 2011-08-25</h1>

<ul>
<li>Fixed; do not over-write the doc when no valide props exist in Model.update (#473)</li>
</ul>

<h1>2.0.0 / 2011-08-24</h1>

<ul>
<li>Added; support for Buffers [justmoon]</li>
<li>Changed; improved error handling [maelstrom]</li>
<li>Removed: unused utils.erase</li>
<li>Fixed; support for passing other context object into Schemas (#234) [Sija]</li>
<li>Fixed; getters are no longer circular refs to themselves (#366)</li>
<li>Removed; unused compat.js</li>
<li>Fixed; getter/setter scopes are set properly</li>
<li>Changed; made several private properties more obvious by prefixing _</li>
<li>Added; DBRef support [guille]</li>
<li>Changed; removed support for multiple collection names per model</li>
<li>Fixed; no longer applying setters when document returned from db</li>
<li>Changed; default auto_reconnect to true</li>
<li>Changed; Query#bind no longer clones the query</li>
<li>Fixed; Model.update now accepts $pull, $inc and friends (#404)</li>
<li>Added; virtual type option support [nw]</li>
</ul>

<h1>1.8.4 / 2011-08-21</h1>

<ul>
<li>Fixed; validation bug when instantiated with non-schema properties (#464) [jmreidy]</li>
</ul>

<h1>1.8.3 / 2011-08-19</h1>

<ul>
<li>Fixed; regression in connection#open [jshaw86]</li>
</ul>

<h1>1.8.2 / 2011-08-17</h1>

<ul>
<li>fixed; reset connection.readyState after failure [tomseago]</li>
<li>fixed; can now query positionally for non-embedded docs (arrays of numbers/strings etc)</li>
<li>fixed; embedded document query casting</li>
<li>added; support for passing options to node-mongo-native db, server, and replsetserver [tomseago]</li>
</ul>

<h1>1.8.1 / 2011-08-10</h1>

<ul>
<li>fixed; ObjectIds were always marked modified</li>
<li>fixed; can now query using document instances</li>
<li>fixed; can now query/update using documents with subdocs</li>
</ul>

<h1>1.8.0 / 2011-08-04</h1>

<ul>
<li>fixed; can now use $all with String and Number</li>
<li>fixed; can query subdoc array with $ne: null</li>
<li>fixed; instance.subdocs#id now works with custom _ids</li>
<li>fixed; do not apply setters when doc returned from db (change in bad behavior)</li>
</ul>

<h1>1.7.4 / 2011-07-25</h1>

<ul>
<li>fixed; sparse now a valid seperate schema option</li>
<li>fixed; now catching cast errors in queries</li>
<li>fixed; calling new Schema with object created in vm.runInNewContext now works (#384) [Sija]</li>
<li>fixed; String enum was disallowing null</li>
<li>fixed; Find by nested document _id now works (#389)</li>
</ul>

<h1>1.7.3 / 2011-07-16</h1>

<ul>
<li>fixed; MongooseArray#indexOf now works with ObjectIds</li>
<li>fixed; validation scope now set properly (#418)</li>
<li>fixed; added missing colors dependency (#398)</li>
</ul>

<h1>1.7.2 / 2011-07-13</h1>

<ul>
<li>changed; node-mongodb-native driver to v0.9.6.7</li>
</ul>

<h1>1.7.1 / 2011-07-12</h1>

<ul>
<li>changed; roll back node-mongodb-native driver to v0.9.6.4</li>
</ul>

<h1>1.7.0 / 2011-07-12</h1>

<ul>
<li>fixed; collection name misspelling [mathrawka]</li>
<li>fixed; 2nd param is required for ReplSetServers [kevinmarvin]</li>
<li>fixed; MongooseArray behaves properly with Object.keys</li>
<li>changed; node-mongodb-native driver to v0.9.6.6</li>
<li>fixed/changed; Mongodb segfault when passed invalid ObjectId (#407)

<ul>
<li>This means invalid data passed to the ObjectId constructor will now error</li>
</ul></li>
</ul>

<h1>1.6.0 / 2011-07-07</h1>

<ul>
<li>changed; .save() errors are now emitted on the instances db instead of the instance 9782463fc</li>
<li>fixed; errors occurring when creating indexes now properly emit on db</li>
<li>added; $maxDistance support to MongooseArrays</li>
<li>fixed; RegExps now work with $all</li>
<li>changed; node-mongodb-native driver to v0.9.6.4</li>
<li>fixed; model names are now accessible via .modelName</li>
<li>added; Query#slaveOk support</li>
</ul>

<h1>1.5.0 / 2011-06-27</h1>

<ul>
<li>changed; saving without a callback no longer ignores the error (@bnoguchi)</li>
<li>changed; hook-js version bump to 0.1.9</li>
<li>changed; node-mongodb-native version bumped to 0.9.6.1 - When .remove() doesn&#39;t
         return an error, null is no longer passed.</li>
<li>fixed; two memory leaks (@justmoon)</li>
<li>added; sparse index support</li>
<li>added; more ObjectId conditionals (gt, lt, gte, lte) (@phillyqueso)</li>
<li>added; options are now passed in model#remote (@JerryLuke)</li>
</ul>

<h1>1.4.0 / 2011-06-10</h1>

<ul>
<li>bumped hooks-js dependency (fixes issue passing null as first arg to next())</li>
<li>fixed; document#inspect now works properly with nested docs</li>
<li>fixed; &#39;set&#39; now works as a schema attribute (GH-365)</li>
<li>fixed; _id is now set properly within pre-init hooks (GH-289)</li>
<li>added; Query#distinct / Model#distinct support (GH-155)</li>
<li>fixed; embedded docs now can use instance methods (GH-249)</li>
<li>fixed; can now overwrite strings conflicting with schema type</li>
</ul>

<h1>1.3.7 / 2011-06-03</h1>

<ul>
<li>added MongooseArray#splice support</li>
<li>fixed; &#39;path&#39; is now a valid Schema pathname</li>
<li>improved hooks (utilizing https://github.com/bnoguchi/hooks-js)</li>
<li>fixed; MongooseArray#$shift now works (never did)</li>
<li>fixed; Document.modified no longer throws</li>
<li>fixed; modifying subdoc property sets modified paths for subdoc and parent doc</li>
<li>fixed; marking subdoc path as modified properly persists the value to the db</li>
<li>fixed; RexExps can again be saved ( #357 )</li>
</ul>

<h1>1.3.6 / 2011-05-18</h1>

<ul>
<li>fixed; corrected casting for queries against array types</li>
<li>added; Document#set now accepts Document instances</li>
</ul>

<h1>1.3.5 / 2011-05-17</h1>

<ul>
<li>fixed; $ne queries work properly with single vals</li>
<li>added; #inspect() methods to improve console.log output</li>
</ul>

<h1>1.3.4 / 2011-05-17</h1>

<ul>
<li>fixed; find by Date works as expected (#336)</li>
<li>added; geospatial 2d index support</li>
<li>added; support for $near (#309)</li>
<li>updated; node-mongodb-native driver</li>
<li>fixed; updating numbers work (#342)</li>
<li>added; better error msg when try to remove an embedded doc without an _id (#307)</li>
<li>added; support for &#39;on-the-fly&#39; schemas (#227)</li>
<li>changed; virtual id getters can now be skipped</li>
<li>fixed; .index() called on subdoc schema now works as expected</li>
<li>fixed; db.setProfile() now buffers until the db is open (#340)</li>
</ul>

<h1>1.3.3 / 2011-04-27</h1>

<ul>
<li>fixed; corrected query casting on nested mixed types</li>
</ul>

<h1>1.3.2 / 2011-04-27</h1>

<ul>
<li>fixed; query hints now retain key order</li>
</ul>

<h1>1.3.1 / 2011-04-27</h1>

<ul>
<li>fixed; setting a property on an embedded array no longer overwrites entire array (GH-310) </li>
<li>fixed; setting nested properties works when sibling prop is named &ldquo;type&rdquo;</li>
<li>fixed; isModified is now much finer grained when .set() is used (GH-323)</li>
<li>fixed; mongoose.model() and connection.model() now return the Model (GH-308, GH-305)</li>
<li>fixed; can now use $gt, $lt, $gte, $lte with String schema types (GH-317)</li>
<li>fixed; .lowercase() -&gt; .toLowerCase() in pluralize()</li>
<li>fixed; updating an embedded document by index works (GH-334)</li>
<li>changed; .save() now passes the instance to the callback (GH-294, GH-264)</li>
<li>added; can now query system.profile and system.indexes collections</li>
<li>added; db.model(&#39;system.profile&#39;) is now included as a default Schema</li>
<li>added; db.setProfiling(level, ms, callback)</li>
<li>added; Query#hint() support</li>
<li>added; more tests</li>
<li>updated node-mongodb-native to 0.9.3</li>
</ul>

<h1>1.3.0 / 2011-04-19</h1>

<ul>
<li>changed; save() callbacks now fire only once on failed validation</li>
<li>changed; Errors returned from save() callbacks now instances of ValidationError</li>
<li>fixed; MongooseArray#indexOf now works properly</li>
</ul>

<h1>1.2.0 / 2011-04-11</h1>

<ul>
<li>changed; MongooseNumber now casts empty string to null</li>
</ul>

<h1>1.1.25 / 2011-04-08</h1>

<ul>
<li>fixed; post init now fires at proper time</li>
</ul>

<h1>1.1.24 / 2011-04-03</h1>

<ul>
<li>fixed; pushing an array onto an Array works on existing docs</li>
</ul>

<h1>1.1.23 / 2011-04-01</h1>

<ul>
<li>Added Model#model</li>
</ul>

<h1>1.1.22 / 2011-03-31</h1>

<ul>
<li>Fixed; $in queries on mixed types now work</li>
</ul>

<h1>1.1.21 / 2011-03-31</h1>

<ul>
<li>Fixed; setting object root to null/undefined works</li>
</ul>

<h1>1.1.20 / 2011-03-31</h1>

<ul>
<li>Fixed; setting multiple props on null field works</li>
</ul>

<h1>1.1.19 / 2011-03-31</h1>

<ul>
<li>Fixed; no longer using $set on paths to an unexisting fields</li>
</ul>

<h1>1.1.18 / 2011-03-30</h1>

<ul>
<li>Fixed; non-mixed type object setters work after initd from null</li>
</ul>

<h1>1.1.17 / 2011-03-30</h1>

<ul>
<li>Fixed; nested object property access works when root initd with null value</li>
</ul>

<h1>1.1.16 / 2011-03-28</h1>

<ul>
<li>Fixed; empty arrays are now saved</li>
</ul>

<h1>1.1.15 / 2011-03-28</h1>

<ul>
<li>Fixed; <code>null</code> and <code>undefined</code> are set atomically.</li>
</ul>

<h1>1.1.14 / 2011-03-28</h1>

<ul>
<li>Changed; more forgiving date casting, accepting &#39;&#39; as null.</li>
</ul>

<h1>1.1.13 / 2011-03-26</h1>

<ul>
<li>Fixed setting values as <code>undefined</code>.</li>
</ul>

<h1>1.1.12 / 2011-03-26</h1>

<ul>
<li>Fixed; nested objects now convert to JSON properly</li>
<li>Fixed; setting nested objects directly now works</li>
<li>Update node-mongodb-native</li>
</ul>

<h1>1.1.11 / 2011-03-25</h1>

<ul>
<li>Fixed for use of <code>type</code> as a key.</li>
</ul>

<h1>1.1.10 / 2011-03-23</h1>

<ul>
<li>Changed; Make sure to only ensure indexes while connected</li>
</ul>

<h1>1.1.9 / 2011-03-2 </h1>

<ul>
<li>Fixed; Mixed can now default to empty arrays</li>
<li>Fixed; keys by the name &#39;type&#39; are now valid</li>
<li>Fixed; null values retrieved from the database are hydrated as null values.</li>
<li>Fixed repeated atomic operations when saving a same document twice.</li>
</ul>

<h1>1.1.8 / 2011-03-23</h1>

<ul>
<li>Fixed &#39;id&#39; overriding. [bnoguchi]</li>
</ul>

<h1>1.1.7 / 2011-03-22</h1>

<ul>
<li>Fixed RegExp query casting when querying against an Array of Strings [bnoguchi]</li>
<li>Fixed getters/setters for nested virtualsl. [bnoguchi]</li>
</ul>

<h1>1.1.6 / 2011-03-22</h1>

<ul>
<li>Only doValidate when path exists in Schema [aheckmann]</li>
<li>Allow function defaults for Array types [aheckmann]</li>
<li>Fix validation hang [aheckmann]</li>
<li>Fix setting of isRequired of SchemaType [aheckmann]</li>
<li>Fix SchemaType#required(false) filter [aheckmann]</li>
<li>More backwards compatibility [aheckmann]</li>
<li>More tests [aheckmann]</li>
</ul>

<h1>1.1.5 / 2011-03-14</h1>

<ul>
<li>Added support for <code>uri, db, fn</code> and <code>uri, fn</code> signatures for replica sets.</li>
<li>Improved/extended replica set tests.</li>
</ul>

<h1>1.1.4 / 2011-03-09</h1>

<ul>
<li>Fixed; running an empty Query doesn&#39;t throw. [aheckmann]</li>
<li>Changed; Promise#addBack returns promise. [aheckmann]</li>
<li>Added streaming cursor support. [aheckmann]</li>
<li>Changed; Query#update defaults to use$SetOnSave now. [brian]</li>
<li>Added more docs.</li>
</ul>

<h1>1.1.3 / 2011-03-04</h1>

<ul>
<li>Added Promise#resolve [aheckmann]</li>
<li>Fixed backward compatibility with nulls [aheckmann]</li>
<li>Changed; Query#{run,exec} return promises [aheckmann]</li>
</ul>

<h1>1.1.2 / 2011-03-03</h1>

<ul>
<li>Restored Query#exec and added notion of default operation [brian]</li>
<li>Fixed ValidatorError messages [brian]</li>
</ul>

<h1>1.1.1 / 2011-03-01 </h1>

<ul>
<li>Added SchemaType String <code>lowercase</code>, <code>uppercase</code>, <code>trim</code>.</li>
<li>Public exports (<code>Model</code>, <code>Document</code>) and tests.</li>
<li>Added ObjectId casting support for <code>Document</code>s.</li>
</ul>

<h1>1.1.0 / 2011-02-25</h1>

<ul>
<li>Added support for replica sets.</li>
</ul>

<h1>1.0.16 / 2011-02-18</h1>

<ul>
<li>Added $nin as another whitelisted $conditional for SchemaArray [brian]</li>
<li>Changed #with to #where [brian]</li>
<li>Added ability to use $in conditional with Array types [brian]</li>
</ul>

<h1>1.0.15 / 2011-02-18</h1>

<ul>
<li>Added <code>id</code> virtual getter for documents to easily access the hexString of
the <code>_id</code>.</li>
</ul>

<h1>1.0.14 / 2011-02-17</h1>

<ul>
<li>Fix for arrays within subdocuments [brian]</li>
</ul>

<h1>1.0.13 / 2011-02-16</h1>

<ul>
<li>Fixed embedded documents saving.</li>
</ul>

<h1>1.0.12 / 2011-02-14 </h1>

<ul>
<li>Minor refactorings [brian]</li>
</ul>

<h1>1.0.11 / 2011-02-14 </h1>

<ul>
<li>Query refactor and $ne, $slice, $or, $size, $elemMatch, $nin, $exists support [brian]</li>
<li>Named scopes sugar [brian]</li>
</ul>

<h1>1.0.10 / 2011-02-11 </h1>

<ul>
<li>Updated node-mongodb-native driver [thanks John Allen]</li>
</ul>

<h1>1.0.9 / 2011-02-09 </h1>

<ul>
<li>Fixed single member arrays as defaults [brian]</li>
</ul>

<h1>1.0.8 / 2011-02-09 </h1>

<ul>
<li>Fixed for collection-level buffering of commands [gitfy]</li>
<li>Fixed <code>Document#toJSON</code> [dalejefferson]</li>
<li>Fixed <code>Connection</code> authentication [robrighter]</li>
<li>Fixed clash of accessors in getters/setters [eirikurn]</li>
<li>Improved <code>Model#save</code> promise handling</li>
</ul>

<h1>1.0.7 / 2011-02-05 </h1>

<ul>
<li>Fixed memory leak warnings for test suite on 0.3</li>
<li>Fixed querying documents that have an array that contain at least one
specified member. [brian]</li>
<li>Fixed default value for Array types (fixes GH-210). [brian]</li>
<li>Fixed example code.</li>
</ul>

<h1>1.0.6 / 2011-02-03 </h1>

<ul>
<li>Fixed <code>post</code> middleware</li>
<li>Fixed; it&#39;s now possible to instantiate a model even when one of the paths maps
to an undefined value [brian]</li>
</ul>

<h1>1.0.5 / 2011-02-02 </h1>

<ul>
<li>Fixed; combo $push and $pushAll auto-converts into a $pushAll [brian]</li>
<li>Fixed; combo $pull and $pullAll auto-converts to a single $pullAll [brian]</li>
<li>Fixed; $pullAll now removes said members from array before save (so it acts just
like pushAll) [brian]</li>
<li>Fixed; multiple $pulls and $pushes become a single $pullAll and $pushAll.
Moreover, $pull now modifies the array before save to reflect the immediate
change [brian]</li>
<li>Added tests for nested shortcut getters [brian]</li>
<li>Added tests that show that Schemas with nested Arrays don&#39;t apply defaults
[brian]</li>
</ul>

<h1>1.0.4 / 2011-02-02 </h1>

<ul>
<li>Added MongooseNumber#toString</li>
<li>Added MongooseNumber unit tests</li>
</ul>

<h1>1.0.3 / 2011-02-02 </h1>

<ul>
<li>Make sure safe mode works with Model#save</li>
<li>Changed Schema options: safe mode is now the default</li>
<li>Updated node-mongodb-native to HEAD</li>
</ul>

<h1>1.0.2 / 2011-02-02 </h1>

<ul>
<li>Added a Model.create shortcut for creating documents. [brian]</li>
<li>Fixed; we can now instantiate models with hashes that map to at least one
null value. [brian]</li>
<li>Fixed Schema with more than 2 nested levels. [brian]</li>
</ul>

<h1>1.0.1 / 2011-02-02 </h1>

<ul>
<li>Improved <code>MongooseNumber</code>, works almost like the native except for <code>typeof</code>
not being <code>&#39;number&#39;</code>.</li>
</ul>
